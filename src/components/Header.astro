---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";
import ImageToggleComponent from "./ImageToggleComponent.astro";
---

<header>
    <div class="logo">
        <!-- <ImageToggleComponent /> -->
        <h1>hangingpulse.com</h1>
    </div>
    <button
        aria-controls="primary-navigation"
        aria-expanded="false"
        class="btn-tgl-nav"><span class="sr-only">Menu</span></button
    >
    <nav>
        <ul
            id="primary-navigation"
            class="primary-navigation"
            data-visible="false"
        >
            <li><a href="/">Blog</a></li>
            <li><a href="/about">About</a></li>
        </ul>
    </nav>
</header>
<style>
    header {
        display: flex;
        justify-content: space-between;
        align-items: center;

        padding: 0.5rem 2rem 0.5rem 2rem;
        margin-bottom: var(--size-3);
        background-color: var(--color-main-light);

        color: var(--color-highlight);
        font-family: var(--font-serif);
    }

    h1 {
        font-size: var(--size-7);
        text-decoration: none;
    }
    .btn-tgl-nav {
        position: absolute;
        top: var(--size-3);
        right: var(--size-5);
        z-index: 9999;
    }

    .primary-navigation {
        display: flex;
        flex-direction: row;
        gap: var(--size-7);
        z-index: 1000;

        list-style: none;
        padding: 0;
        margin: 0;
    }

    li {
        list-style: none;
        font-size: var(--size-5);
    }
    a {
        color: var(--color-highlight);

        text-decoration: none;
    }

    a:hover {
        text-decoration: underline;
    }
    @media (width < 640px) {
        .primary-navigation {
            position: fixed;
            inset: 0 0 0 30%;
            background-color: var(--color-highlight);
            flex-direction: column;
            padding: min(20vh, var(--size-8)) var(--size-4);
            transform: translateX(100%);
            transition: transform 150ms ease-out;
        }

        .primary-navigation[data-visible="true"] {
            transform: translateX(0%);
        }
        a {
            color: black;
        }
    }
</style>
<script>
    function init() {
        const toggleButton = document.querySelector(".btn-tgl-nav");
        const navMenu = document.querySelector(".primary-navigation");

        toggleButton.addEventListener("click", () => {
            const visibility = navMenu.getAttribute("data-visible");
            console.log(visibility);

            if (visibility === "false") {
                navMenu.setAttribute("data-visible", "true");
                toggleButton.setAttribute("aria-expanded", "true");
            } else if (visibility === "true") {
                navMenu.setAttribute("data-visible", "false");
                toggleButton.setAttribute("aria-expanded", "false");
            }
        });
    }
    document.addEventListener("astro:after-swap", init);
    init();
</script>
